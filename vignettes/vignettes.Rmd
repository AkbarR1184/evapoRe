---
output:
  html_document:
    df_print: paged
---

```{r, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

# evapoRe Package

This vignette provides an overview of the functions available in the
`evapoRe` package, along with examples of their usage and data
visualization.

## Installation

To install the `evapoRe` package, you can use the `devtools` package:

```{r message=FALSE, warning=FALSE}
devtools::install_github("AkbarR1184/evapoRe")
```

## Load the Package

Once installed, you can load the `evapoRe` package into your R session:

```{r message=FALSE, warning=FALSE}
library(evapoRe)
```

## Download Data

To begin working with the `evapoRe` package, you can download the
required data using the `download_data()` function. For example, to
download the GLDAS CLSM dataset, you can use the following command:

```{r warning=FALSE}
download_data(name = 'gldas-clsm')
```

## Data Exploration

After downloading the data, you can explore its information using the
`show_info()` function. The following code demonstrates how to display
information about the global GLDAS CLSM dataset:

```{r message=FALSE, warning=FALSE}
gldas_clsm_global <- raster::brick('gldas-clsm_e_mm_land_200001_202211_025_monthly.nc')
show_info(gldas_clsm_global)
```

## Data Subsetting

To subset the downloaded data based on specific criteria, you can use
the `subset_spacetime()` function. The example below shows how to subset
the GLDAS CLSM dataset for the years 2001-2010 and within a bounding
box:

```{r warning=FALSE}
gldas_clsm_subset <- subset_spacetime(gldas_clsm_global, years = c(2001, 2010), bbox = c(2,28,42,58))
show_info(gldas_clsm_subset)
```

## Data Cropping

To crop the data to a specific spatial extent, you can utilize the
`crop_data()` function. The code snippet below demonstrates how to crop
the subsetted GLDAS CLSM data to a specific shapefile:

```{r message=FALSE, warning=FALSE}
gldas_clsm_cz <- crop_data(x = gldas_clsm_subset, shp_path = "gadm41_CZE_0.shp")
show_info(gldas_clsm_cz)
```

## Time Series Creation

To convert the data into time series format, you can use the `make_ts()`
function. Here's an example of creating time series for the global GLDAS
CLSM dataset:

```{r warning=FALSE}
gldas_clsm_global_ts <- make_ts(gldas_clsm_global)
head(gldas_clsm_global_ts, 12)
```

## Data Visualization

The `evapoRe` package provides several functions for visualizing the
data. Here are some examples:

### Map Visualization

You can use the `plot_map()` function to visualize spatial data on a
map. The following code demonstrates how to plot the first layer of the
global GLDAS CLSM dataset:

```{r message=FALSE, warning=FALSE}
plot_map(gldas_clsm_global[[6]])
```

Similarly, you can plot the first layer of the subsetted and cropped
datasets using `plot_map(gldas_clsm_subset[[6]])` and
`plot_map(gldas_clsm_cz[[6]])`, respectively.

### Time Series Visualization

To visualize the data as time series, you can utilize the `plot_line()`
function. Here's an example of plotting

the time series for the global GLDAS CLSM dataset:

```{r warning=FALSE}
plot_line(gldas_clsm_global_ts)
```

Similarly, you can plot the time series for the subsetted and cropped
datasets using `plot_line(gldas_clsm_subset_ts)` and
`plot_line(gldas_clsm_cz_ts)`, respectively.

### Heatmap Visualization

The `plot_heatmap()` function allows you to create heatmaps of the data.
Here's an example of plotting a heatmap for the global GLDAS CLSM
dataset:

```{r warning=FALSE}
plot_heatmap(gldas_clsm_global_ts)
```

You can also create heatmaps for the subsetted and cropped datasets
using `plot_heatmap(gldas_clsm_subset_ts)` and
`plot_heatmap(gldas_clsm_cz_ts)`, respectively.

### Boxplot Visualization

To visualize the distribution of the data using boxplots, you can use
the `plot_box()` function. Here's an example of plotting boxplots for
the global GLDAS CLSM dataset:

```{r warning=FALSE}
plot_box(gldas_clsm_global_ts)
```

Similarly, you can plot boxplots for the subsetted and cropped datasets
using `plot_box(gldas_clsm_subset_ts)` and `plot_box(gldas_clsm_cz_ts)`,
respectively.

### Density Plot Visualization

The `plot_density()` function allows you to create density plots of the
data. Here's an example of plotting a density plot for the global GLDAS
CLSM dataset:

```{r message=FALSE, warning=FALSE}
plot_density(gldas_clsm_global_ts)
```

You can also create density plots for the subsetted and cropped datasets
using `plot_density(gldas_clsm_subset_ts)` and
`plot_density(gldas_clsm_cz_ts)`, respectively.

### Summary Plot Visualization

The `plot_summary()` function provides a summary plot of the data.
Please note that for good aesthetics, it is recommended to save the
`plot_summary()` output using `ggsave()` with specified width and
height. Here's an example:

```{r warning=FALSE}
plot_summary(gldas_clsm_global_ts) # NOTE: For good aesthetics, we recommend saving plot_summary with ggsave(<filename>, <plot>, width = 16.3, height = 15.03).
```

This covers the visualization capabilities of the `evapoRe` package. You
can further explore these functions and their parameters in the package
documentation for more customization options.

------------------------------------------------------------------------

This concludes the vignette on the `evapoRe` package. For more detailed
usage instructions and additional functions, please refer to the package
documentation.
